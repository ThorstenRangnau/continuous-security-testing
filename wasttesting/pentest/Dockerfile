FROM docker/compose

RUN apk update && apk add python3-dev curl
RUN pip3 install python-owasp-zap-v2.4

RUN mkdir /app
COPY ./pen-test-app.py /app/pen-test-app.py
COPY wait-for-it.sh /app/wait-for-it.sh
RUN chmod +x /app/wait-for-it.sh

RUN mkdir -p /results

WORKDIR /app

COPY entrypoint.sh /
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]